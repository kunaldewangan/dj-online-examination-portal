{% extends 'packages/package_base.html' %}

{% block package_list %}
<div class="col-md-12">
    <span>Test Will Start In: <span id='start'>        
    </span></span>
    <h1>Package Details:</h1>
    <h3>Package Name: {{object.name}}</h3>
    <p>Package Description: {{object.description}}</p>

    <button id='test-button'>
        <a href="#" id='test-href'>test</a>
    </button>
    <button><a href="{% url 'packages:user_package_result' package_id=object.id %}">result</a></button>
    
</div>
{% endblock %}

{% block script %}
<script>
    var start_date = new Date("{{start_date}}").getTime();
    var x = setInterval(function() {
    var now = new Date().getTime(); 
    var t = start_date - now;
    var days = Math.floor(t / (1000 * 60 * 60 * 24)); 
    var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60)); 
    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60)); 
    var seconds = Math.floor((t % (1000 * 60)) / 1000); 
    document.getElementById("start").innerHTML = days + "d " 
    + hours + "h " + minutes + "m " + seconds + "s "; 
    document.getElementById("test-button").style.display="none";
    // console.log('start time is:'+hours);
        if (t < 0) { 
            clearInterval(x); 
            document.getElementById("start").innerHTML = "Time is started"; 
            document.getElementById("test-button").style.display = "block";
            document.getElementById('test-href').href="{% url 'tests:test' package_id=object.id %}";
        } 
    }, 1000); 
    </script> 
    
{% endblock %}